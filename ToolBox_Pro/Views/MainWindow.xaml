<Window x:Class="ToolBox_Pro.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ToolBox_Pro"
        xmlns:viewmodels="clr-namespace:ToolBox_Pro.ViewModels"
        mc:Ignorable="d" 
        Title="ToolBox Pro" Height="1250" Width="1280"
        Background="#202020"
        FontFamily="Aptos"
        WindowStartupLocation="CenterScreen">

    <!-- DataContext Binding für MainWindow -->
    <Window.DataContext>
        <viewmodels:MainWindowViewModel />
    </Window.DataContext>
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Styles/MainWindowStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <!--<Storyboard x:Key="FlyoutOpenAnimation">
                <DoubleAnimation Storyboard.TargetName="FlyoutGrid"
                     Storyboard.TargetProperty="Width"
                     From="80" To="320"
                     Duration="0:0:0.3"
                     AccelerationRatio="0.3"
                     DecelerationRatio="0.7"/>
            </Storyboard>
            <Storyboard x:Key="FlyoutCloseAnimation">
                <DoubleAnimation Storyboard.TargetName="FlyoutGrid"
                     Storyboard.TargetProperty="Width"
                     From="320" To="80"
                     Duration="0:0:0.3"
                     AccelerationRatio="0.3"
                     DecelerationRatio="0.7"/>
            </Storyboard>-->
        </ResourceDictionary>


    </Window.Resources>

    <Grid>
        <!-- Navigationsbereich (links) -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Navigationsleiste -->
        <Border x:Name="FlyoutBorder"
        Background="#8B0000"
        Width="60"
        MouseEnter="FlyoutBorder_MouseEnter"
        MouseLeave="FlyoutBorder_MouseLeave">

            <Grid>
                <ListBox x:Name="NavigationList"
                 ItemsSource="{Binding NavigationItems}"
                 SelectedItem="{Binding SelectedNavigationItem, Mode=TwoWay}"
                 Background="Transparent"
                 BorderThickness="0">

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="40"/>
                                    <!-- Icon-Bereich -->
                                    <ColumnDefinition Width="*" />
                                    <!-- Text-Bereich -->
                                </Grid.ColumnDefinitions>

                                <TextBlock Text="{Binding Icon}"
                                   FontSize="20"
                                   FontFamily="Segoe UI Emoji"
                                           Foreground="White"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Grid.Column="0"/>

                                <TextBlock Text="{Binding Title}"
                                   VerticalAlignment="Center"
                                           Foreground="White"
                                   Visibility="{Binding DataContext.IsFlyoutExpanded, 
                        RelativeSource={RelativeSource AncestorType=Window}, 
                        Converter={StaticResource BooleanToVisibilityConverter}}"
                                   Grid.Column="1"/>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </Border>

        <!-- Rechter Bereich -->
        <Grid Grid.Column="1">
            <!-- Startanzeige -->
            <Grid x:Name="StartView"
              Visibility="{Binding IstStartAktiv, Converter={StaticResource BoolToVisibilityConverter}}"
              Background="White">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Image Source="/Images/WN.png"
                       Width="200" Height="200"
                       Margin="0 0 0 20"/>
                    <TextBlock Text="Willkommen bei ToolBox Pro"
                           FontSize="22"
                           FontWeight="Bold"
                           Foreground="#444"
                           HorizontalAlignment="Center"/>
                    <TextBlock Text="Bitte wählen Sie eine Funktion links in der Navigation."
                           FontSize="14"
                           Foreground="#666"
                           Margin="0 10 0 0"
                           HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>

            <!-- Content -->
            <ContentControl Content="{Binding CurrentView}" />
        </Grid>

    </Grid>
</Window>
